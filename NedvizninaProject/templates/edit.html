{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit: {{ house.name }} - House MS</title>
    <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'index' %}">
                <span class="me-2">üè†</span>
                <span class="fw-bold">House MS</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Projects</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Services</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Contacts</a></li>
                    <li class="nav-item"><a class="btn btn-dark text-white ms-2" href="#">Contact us</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5">
        <div class="row">
            <!-- Left Side - Form -->
            <div class="col-lg-6">
                <h1 class="display-5 mb-4">EDIT: {{ house.name }}</h1>

                {% if form.errors %}
                <div class="alert alert-danger">
                    <ul class="mb-0">
                        {% for field, errors in form.errors.items %}
                            {% for error in errors %}
                                <li>{{ field }}: {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label for="{{ form.name.id_for_label }}" class="form-label">Name</label>
                        {{ form.name }}
                    </div>

                    <div class="mb-3">
                        <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
                        {{ form.description }}
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Characteristics</label>
                        <input type="text" class="form-control" value="{% for char in house.characteristicrealestate_set.all %}{{ char.characteristic.name }}{% if not forloop.last %},{% endif %}{% endfor %}" readonly>
                        <small class="form-text text-muted">Characteristics can only be edited in admin panel</small>
                    </div>

                    <div class="mb-3">
                        <label for="{{ form.area.id_for_label }}" class="form-label">Area (in sq. meters)</label>
                        {{ form.area }}
                    </div>

                    <div class="mb-3">
                        <label for="{{ form.date_published.id_for_label }}" class="form-label">Date Announced for Sale</label>
                        <div class="input-group">
                            {{ form.date_published }}
                            <span class="input-group-text">üìÖ</span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="{{ form.photo.id_for_label }}" class="form-label">Photo</label>
                        {{ form.photo }}
                        {% if house.photo %}
                            <small class="form-text text-muted">Current: {{ house.photo.name }}</small>
                        {% endif %}
                    </div>

                    <div class="mb-3 form-check">
                        {{ form.isReserved }}
                        <label class="form-check-label" for="{{ form.isReserved.id_for_label }}">
                            Is this a reserve?
                        </label>
                    </div>

                    <div class="mb-3 form-check">
                        {{ form.isSold }}
                        <label class="form-check-label" for="{{ form.isSold.id_for_label }}">
                            Has this location ever been sold?
                        </label>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-dark btn-lg">Submit</button>
                    </div>
                </form>
            </div>

            <!-- Right Side - Image -->
            <div class="col-lg-6">
                {% if house.photo %}
                    <img src="{{ house.photo.url }}" class="img-fluid rounded shadow" alt="{{ house.name }}" style="max-height: 600px; object-fit: cover;">
                {% else %}
                    <div class="bg-light rounded shadow d-flex align-items-center justify-content-center" style="height: 400px;">
                        <span class="text-muted">No image available</span>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>

</body>
</html>